<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OIKOS Â· Dev Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:       #04090f;
  --bg2:      #060d18;
  --surface:  #091220;
  --s2:       #0c1728;
  --s3:       #101e33;
  --line:     #13243d;
  --line2:    #1a3052;
  --line3:    #213b62;

  --blue:     #3b82f6;
  --blue-d:   #1d4ed8;
  --blue-l:   #60a5fa;
  --blue-xl:  #93c5fd;
  --blue-bg:  rgba(59,130,246,.1);
  --blue-bg2: rgba(59,130,246,.06);

  --cyan:     #06b6d4;
  --cyan-bg:  rgba(6,182,212,.1);
  --green:    #10b981;
  --green-bg: rgba(16,185,129,.1);
  --amber:    #f59e0b;
  --amber-bg: rgba(245,158,11,.1);
  --red:      #ef4444;
  --red-bg:   rgba(239,68,68,.1);
  --purple:   #8b5cf6;
  --purple-bg:rgba(139,92,246,.1);
  --teal:     #14b8a6;
  --teal-bg:  rgba(20,184,166,.1);

  --t1: #f1f5f9;
  --t2: #94a3b8;
  --t3: #475569;
  --t4: #1e3a5f;

  --radius: 12px;
  --radius-lg: 16px;
}

*, ::before, ::after { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--t1);
  min-height: 100vh;
  overflow-x: hidden;
  line-height: 1.5;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AMBIENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.amb {
  position: fixed; pointer-events: none; z-index: 0;
  border-radius: 50%; filter: blur(120px); opacity: 0.5;
}
.amb1 { width: 800px; height: 600px; top: -300px; left: -200px; background: radial-gradient(circle, rgba(29,78,216,.15), transparent 70%); }
.amb2 { width: 600px; height: 600px; bottom: -200px; right: -200px; background: radial-gradient(circle, rgba(139,92,246,.1), transparent 70%); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#loader {
  position: fixed; inset: 0; z-index: 999;
  background: var(--bg);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 0;
}
.ld-icon-wrap {
  position: relative;
  width: 100px; height: 100px;
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 28px;
  opacity: 0; animation: fadY .6s .1s ease forwards;
}
.ld-ring {
  position: absolute; inset: 0; border-radius: 50%;
  border: 2px solid transparent;
  border-top-color: var(--blue);
  animation: spin 1.2s linear infinite;
}
.ld-ring2 {
  position: absolute; inset: 8px; border-radius: 50%;
  border: 1px solid transparent;
  border-top-color: var(--cyan);
  animation: spin .8s linear infinite reverse;
}
.ld-gh-bg {
  width: 72px; height: 72px; border-radius: 50%;
  background: linear-gradient(135deg, #161b22, #21262d);
  border: 1px solid #30363d;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 0 40px rgba(59,130,246,.25);
}
.ld-gh-bg svg { width: 42px; height: 42px; fill: #e6edf3; }
.ld-brand {
  font-size: 30px; font-weight: 800; color: #fff;
  letter-spacing: -.5px; margin-bottom: 6px;
  opacity: 0; animation: fadY .5s .3s ease forwards;
}
.ld-brand span { color: var(--blue-l); }
.ld-org {
  font-size: 12px; color: var(--t3); letter-spacing: .5px;
  margin-bottom: 36px;
  opacity: 0; animation: fadY .5s .4s ease forwards;
}
.ld-progress-wrap {
  width: 240px; height: 2px;
  background: var(--line);
  border-radius: 2px; overflow: hidden;
  margin-bottom: 14px;
  opacity: 0; animation: fadY .4s .5s ease forwards;
}
.ld-progress { height: 100%; width: 0; background: linear-gradient(90deg, var(--blue-d), var(--blue), var(--cyan)); border-radius: 2px; transition: width .3s ease; }
.ld-status {
  font-size: 11px; color: var(--t3); letter-spacing: .5px;
  opacity: 0; animation: fadY .4s .6s ease forwards;
}
@keyframes fadY { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
@keyframes spin  { to { transform: rotate(360deg); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#sidebar {
  position: fixed; left: 0; top: 0; bottom: 0; width: 62px;
  background: var(--bg2);
  border-right: 1px solid var(--line);
  z-index: 100;
  display: flex; flex-direction: column; align-items: center;
  padding: 18px 0; gap: 4px;
}
.sb-logo {
  width: 36px; height: 36px; border-radius: 9px;
  background: linear-gradient(135deg, var(--blue-d), var(--blue));
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: 11px; color: #fff;
  margin-bottom: 20px; flex-shrink: 0; letter-spacing: -.3px;
}
.sb-btn {
  width: 40px; height: 40px; border-radius: 9px;
  background: transparent; border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  color: var(--t3); transition: all .2s; position: relative;
}
.sb-btn svg { width: 17px; height: 17px; fill: none; stroke: currentColor; stroke-width: 1.7; stroke-linecap: round; stroke-linejoin: round; }
.sb-btn:hover { background: var(--blue-bg); color: var(--blue-l); }
.sb-btn.on { background: var(--blue-bg); color: var(--blue-l); }
.sb-btn.on::before { content:''; position:absolute; left:0; top:28%; bottom:28%; width:2.5px; background:var(--blue-l); border-radius:0 2px 2px 0; }
.sb-sep { width: 28px; height: 1px; background: var(--line); margin: 6px 0; }
.sb-bottom { margin-top: auto; display: flex; flex-direction: column; align-items: center; gap: 4px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APP SHELL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#app { margin-left: 62px; position: relative; z-index: 10; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOPBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#topbar {
  position: sticky; top: 0; z-index: 50; height: 56px;
  background: rgba(4,9,15,.9); backdrop-filter: blur(24px);
  border-bottom: 1px solid var(--line);
  display: flex; align-items: center; padding: 0 28px; gap: 12px;
}
.tb-brand { font-size: 16px; font-weight: 700; color: var(--t1); flex: 1; letter-spacing: -.3px; }
.tb-brand span { color: var(--blue-l); }
.tb-org {
  display: flex; align-items: center; gap: 6px;
  background: var(--surface); border: 1px solid var(--line);
  padding: 5px 12px; border-radius: 8px;
  font-size: 11px; color: var(--t2);
}
.tb-org svg { width: 13px; height: 13px; fill: none; stroke: var(--blue-l); stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round; }
.live-chip {
  display: flex; align-items: center; gap: 5px;
  background: var(--green-bg); border: 1px solid rgba(16,185,129,.25);
  padding: 4px 11px; border-radius: 20px;
  font-size: 10px; font-weight: 600; letter-spacing: 1.2px; color: var(--green);
}
.live-dot { width: 5px; height: 5px; border-radius: 50%; background: var(--green); animation: blink 2s infinite; }
@keyframes blink { 0%,100%{box-shadow:0 0 0 0 rgba(16,185,129,.5)} 50%{box-shadow:0 0 0 5px transparent} }
.tb-time { font-size: 11px; color: var(--t3); min-width: 70px; }
.tb-token-btn {
  font-size: 10px; color: var(--t3);
  background: var(--surface); border: 1px solid var(--line);
  padding: 4px 10px; border-radius: 6px; cursor: pointer; transition: all .2s;
}
.tb-token-btn:hover { border-color: var(--line2); color: var(--t2); }
#btn-refresh {
  display: flex; align-items: center; gap: 6px;
  padding: 7px 14px; border-radius: 8px;
  background: var(--blue-bg); border: 1px solid var(--line2);
  color: var(--blue-l); font-size: 11px; font-weight: 600;
  cursor: pointer; transition: all .2s; white-space: nowrap;
}
#btn-refresh:hover { border-color: var(--blue); }
#btn-refresh svg { width: 13px; height: 13px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
#btn-refresh.spinning svg { animation: spin .7s linear infinite; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#content { padding: 28px 28px 80px; }

/* â”€â”€â”€ Section Header â”€â”€â”€ */
.sec-hd {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 16px; margin-top: 32px;
}
.sec-hd:first-child { margin-top: 0; }
.sec-label {
  display: flex; align-items: center; gap: 8px;
  font-size: 10px; font-weight: 700;
  letter-spacing: 2.5px; text-transform: uppercase; color: var(--t3);
}
.sec-label::before {
  content: ''; width: 3px; height: 14px; border-radius: 2px;
  background: var(--blue-l); display: block;
}
.sec-chip {
  font-size: 10px; color: var(--blue-l);
  background: var(--blue-bg); border: 1px solid rgba(59,130,246,.2);
  padding: 2px 10px; border-radius: 20px;
}

/* â”€â”€â”€ KPI Grid â”€â”€â”€ */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 10px;
}
.kpi-card {
  background: var(--surface);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 16px 18px;
  position: relative; overflow: hidden;
  opacity: 0; animation: fadY .5s forwards;
  transition: border-color .2s, transform .2s;
  cursor: default;
}
.kpi-card:hover { border-color: var(--line2); transform: translateY(-2px); }
.kpi-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: var(--kc, var(--blue-l)); }
.kpi-top { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 12px; }
.kpi-icon {
  width: 32px; height: 32px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  background: var(--kc-bg, var(--blue-bg));
}
.kpi-icon svg { width: 15px; height: 15px; fill: none; stroke: var(--kc, var(--blue-l)); stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round; }
.kpi-badge { font-size: 9px; font-weight: 600; padding: 2px 6px; border-radius: 4px; }
.kpi-badge.up { background: var(--green-bg); color: var(--green); }
.kpi-badge.dn { background: var(--red-bg); color: var(--red); }
.kpi-badge.nt { background: var(--s2); color: var(--t3); }
.kpi-val { font-size: 26px; font-weight: 800; color: #fff; line-height: 1; margin-bottom: 4px; }
.kpi-lbl { font-size: 9px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--t3); }
.kpi-sub { font-size: 10px; color: var(--t3); margin-top: 3px; }

/* â”€â”€â”€ Panel â”€â”€â”€ */
.panel {
  background: var(--surface);
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  padding: 22px;
  opacity: 0; animation: fadY .5s forwards;
  transition: border-color .2s;
}
.panel:hover { border-color: var(--line2); }
.panel-hd {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 20px;
}
.panel-title {
  font-size: 12px; font-weight: 600; color: var(--t2);
  display: flex; align-items: center; gap: 7px;
}
.panel-title svg { width: 14px; height: 14px; fill: none; stroke: var(--blue-l); stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round; }
.panel-meta { font-size: 9px; color: var(--t3); background: var(--s2); border: 1px solid var(--line); padding: 2px 8px; border-radius: 4px; }

/* â”€â”€â”€ Grid Layouts â€” all independent rows â”€â”€â”€ */
.row-2   { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
.row-3   { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 14px; }
.row-4   { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 14px; }
.row-2-1 { display: grid; grid-template-columns: 2fr 1fr; gap: 14px; }
.row-1-2 { display: grid; grid-template-columns: 1fr 2fr; gap: 14px; }
.row-3-1 { display: grid; grid-template-columns: 3fr 1fr; gap: 14px; }
.row-1-3 { display: grid; grid-template-columns: 1fr 3fr; gap: 14px; }

/* â”€â”€â”€ Canvas containers â€” EXPLICIT height prevents overlap â”€â”€â”€ */
.chart-box { position: relative; width: 100%; }
.h160 { height: 160px; }
.h200 { height: 200px; }
.h220 { height: 220px; }
.h260 { height: 260px; }

/* â”€â”€â”€ Spotlight Panel â”€â”€â”€ */
.spotlight {
  background: linear-gradient(145deg, var(--s2), var(--surface));
  border: 1px solid var(--line2);
  border-radius: var(--radius-lg);
  padding: 22px;
  opacity: 0; animation: fadY .5s .2s forwards;
  display: flex; flex-direction: column; gap: 16px;
}
.sp-eye { font-size: 9px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; color: var(--blue-l); }
.sp-name { font-size: 19px; font-weight: 800; color: #fff; line-height: 1.2; }
.sp-desc { font-size: 11px; color: var(--t3); line-height: 1.5; }
.sp-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.sp-stat { background: var(--surface); border: 1px solid var(--line); border-radius: 9px; padding: 10px; text-align: center; }
.sp-stat-v { font-size: 18px; font-weight: 800; color: #fff; }
.sp-stat-l { font-size: 8px; text-transform: uppercase; letter-spacing: 1px; color: var(--t3); margin-top: 2px; }
.sp-bar { display: flex; flex-direction: column; gap: 10px; }
.sp-bar-row { display: flex; flex-direction: column; gap: 4px; }
.sp-bar-lbl { display: flex; justify-content: space-between; font-size: 10px; color: var(--t3); }
.bar-track { height: 5px; background: var(--line); border-radius: 3px; overflow: hidden; }
.bar-fill { height: 100%; border-radius: 3px; transition: width 1.2s ease; }
.lang-list { display: flex; flex-direction: column; gap: 8px; }
.lang-row { display: flex; align-items: center; gap: 8px; }
.lang-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
.lang-name { font-size: 11px; color: var(--t2); width: 84px; flex-shrink: 0; }
.lang-track { flex: 1; height: 5px; background: var(--line); border-radius: 3px; overflow: hidden; }
.lang-fill { height: 100%; border-radius: 3px; }
.lang-count { font-size: 10px; color: var(--t3); width: 44px; text-align: right; }

/* â”€â”€â”€ Storage Widget â”€â”€â”€ */
.storage-wrap { display: flex; flex-direction: column; align-items: center; gap: 20px; }
.storage-list { width: 100%; display: flex; flex-direction: column; gap: 9px; }
.si { display: flex; align-items: center; gap: 8px; }
.si-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
.si-name { font-size: 11px; color: var(--t2); flex: 1; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.si-bar { flex: 2; height: 4px; background: var(--line); border-radius: 2px; overflow: hidden; }
.si-fill { height: 100%; border-radius: 2px; }
.si-val { font-size: 10px; color: var(--t2); font-weight: 600; flex-shrink: 0; width: 54px; text-align: right; }

/* â”€â”€â”€ Heatmap â”€â”€â”€ */
.heatmap { display: flex; flex-direction: column; gap: 3px; }
.hm-row { display: flex; gap: 3px; }
.hm-cell {
  width: 14px; height: 14px; border-radius: 3px; flex-shrink: 0;
  cursor: default; transition: transform .15s;
}
.hm-cell:hover { transform: scale(1.4); z-index: 5; position: relative; }
.hm-0 { background: var(--line); }
.hm-1 { background: rgba(59,130,246,.22); }
.hm-2 { background: rgba(59,130,246,.44); }
.hm-3 { background: rgba(59,130,246,.7); }
.hm-4 { background: var(--blue-l); }
.hm-legend { display: flex; align-items: center; gap: 5px; margin-top: 12px; font-size: 9px; color: var(--t3); }
.hm-legend .hm-cell { width: 12px; height: 12px; }

/* â”€â”€â”€ Timeline â”€â”€â”€ */
.tl-list { display: flex; flex-direction: column; gap: 0; max-height: 420px; overflow-y: auto; }
.tl-list::-webkit-scrollbar { width: 3px; }
.tl-list::-webkit-scrollbar-track { background: transparent; }
.tl-list::-webkit-scrollbar-thumb { background: var(--line2); border-radius: 2px; }
.tl-item {
  display: flex; gap: 12px; padding: 11px 0;
  border-bottom: 1px solid var(--line);
  transition: background .15s;
}
.tl-item:last-child { border-bottom: none; }
.tl-item:hover { background: var(--blue-bg2); margin: 0 -22px; padding: 11px 22px; }
.tl-left { display: flex; flex-direction: column; align-items: center; width: 46px; flex-shrink: 0; }
.tl-time { font-size: 8px; color: var(--t3); text-align: center; white-space: nowrap; }
.tl-vline { flex: 1; width: 1px; background: var(--line); margin: 3px 0; min-height: 8px; }
.tl-dot {
  width: 8px; height: 8px; border-radius: 50%; border: 2px solid; flex-shrink: 0;
}
.tl-dot.fr { background: var(--green); border-color: var(--green); box-shadow: 0 0 8px var(--green); }
.tl-dot.wm { background: var(--amber); border-color: var(--amber); }
.tl-dot.cl { background: var(--t4); border-color: var(--t4); }
.tl-body { flex: 1; min-width: 0; padding-left: 10px; }
.tl-repo { font-size: 12px; font-weight: 600; color: var(--t1); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 1px; }
.tl-msg  { font-size: 10px; color: var(--t3); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.tl-tags { display: flex; gap: 5px; margin-top: 4px; }
.tl-tag { font-size: 8px; padding: 1px 6px; border-radius: 3px; font-weight: 600; border: 1px solid; }
.tl-tag.c { background: var(--blue-bg); color: var(--blue-l); border-color: rgba(59,130,246,.2); }
.tl-tag.l { background: var(--s2); color: var(--t3); border-color: var(--line); }
.tl-hash { font-size: 9px; color: var(--t3); font-family: monospace; flex-shrink: 0; padding-left: 8px; align-self: flex-start; }

/* â”€â”€â”€ Table â”€â”€â”€ */
.tbl-wrap { overflow-x: auto; }
.rtbl { width: 100%; border-collapse: collapse; }
.rtbl th {
  font-size: 9px; text-transform: uppercase; letter-spacing: 1.5px;
  color: var(--t3); padding: 0 14px 12px; text-align: left;
  border-bottom: 1px solid var(--line); font-weight: 600; white-space: nowrap;
}
.rtbl td {
  padding: 11px 14px; font-size: 11px; color: var(--t2);
  border-bottom: 1px solid var(--line); vertical-align: middle; white-space: nowrap;
}
.rtbl tr:last-child td { border-bottom: none; }
.rtbl tr:hover td { background: var(--blue-bg2); }
.rtbl .t-name { font-size: 12px; font-weight: 600; color: var(--t1); max-width: 160px; overflow: hidden; text-overflow: ellipsis; display: block; }
.rtbl .t-lang { font-size: 9px; padding: 2px 7px; border-radius: 4px; font-weight: 600; border: 1px solid; display: inline-block; }
.t-b  { color: var(--blue-l); font-weight: 600; }
.t-g  { color: var(--green); font-weight: 600; }
.t-r  { color: var(--red); font-weight: 600; }
.t-push { display: inline-flex; align-items: center; gap: 4px; font-size: 9px; padding: 2px 7px; border-radius: 4px; }
.t-push.fr { background: var(--green-bg); color: var(--green); border: 1px solid rgba(16,185,129,.2); }
.t-push.wm { background: var(--amber-bg); color: var(--amber); border: 1px solid rgba(245,158,11,.2); }
.t-push.cl { background: var(--s2); color: var(--t3); border: 1px solid var(--line); }
.t-link { color: var(--blue-l); text-decoration: none; font-size: 13px; transition: color .15s; }
.t-link:hover { color: var(--blue-xl); }

/* â”€â”€â”€ Repo Cards â”€â”€â”€ */
.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap: 12px;
}
.rc {
  background: var(--surface);
  border: 1px solid var(--line);
  border-radius: var(--radius-lg);
  overflow: hidden;
  opacity: 0; transform: translateY(8px);
  animation: fadY .4s forwards;
  transition: border-color .25s, box-shadow .25s, transform .25s;
}
.rc:hover {
  border-color: var(--line3);
  box-shadow: 0 0 0 1px var(--line2), 0 20px 60px rgba(0,0,0,.5), inset 0 1px 0 rgba(59,130,246,.06);
  transform: translateY(-4px);
}
.rc-accent { height: 2px; width: 100%; }
.rc-body { padding: 18px 20px; display: flex; flex-direction: column; gap: 14px; }
.rc-header { display: flex; align-items: flex-start; gap: 11px; }
.rc-icon {
  width: 36px; height: 36px; border-radius: 9px; flex-shrink: 0;
  background: var(--blue-bg); border: 1px solid var(--line2);
  display: flex; align-items: center; justify-content: center;
}
.rc-icon svg { width: 18px; height: 18px; fill: none; stroke: var(--blue-l); stroke-width: 1.7; stroke-linecap: round; stroke-linejoin: round; }
.rc-name { font-size: 13px; font-weight: 700; color: #fff; margin-bottom: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.rc-desc { font-size: 10px; color: var(--t3); line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.rc-chip { display: inline-flex; align-items: center; gap: 4px; padding: 2px 8px; border-radius: 5px; font-size: 9px; font-weight: 600; border: 1px solid; flex-shrink: 0; }
.rc-chip-dot { width: 5px; height: 5px; border-radius: 50%; }

.rc-stats { display: grid; grid-template-columns: repeat(4,1fr); border: 1px solid var(--line); border-radius: 10px; overflow: hidden; }
.rcs { padding: 10px 5px; display: flex; flex-direction: column; align-items: center; gap: 2px; border-right: 1px solid var(--line); }
.rcs:last-child { border-right: none; }
.rcs:hover { background: rgba(255,255,255,.02); }
.rcs svg { width: 11px; height: 11px; fill: none; stroke: var(--t3); stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round; margin-bottom: 2px; }
.rcs-v { font-size: 14px; font-weight: 700; color: #fff; }
.rcs-l { font-size: 7px; color: var(--t3); letter-spacing: 1px; text-transform: uppercase; }

.rc-health { display: flex; flex-direction: column; gap: 6px; }
.rch { display: flex; align-items: center; gap: 8px; }
.rch-l { font-size: 9px; color: var(--t3); width: 46px; flex-shrink: 0; }
.rch-track { flex: 1; height: 3px; background: var(--line); border-radius: 2px; overflow: hidden; }
.rch-fill { height: 100%; border-radius: 2px; transition: width 1.1s ease; }
.rch-v { font-size: 9px; color: var(--t2); width: 24px; text-align: right; }

.rc-commits { display: flex; flex-direction: column; gap: 4px; }
.rc-clbl { font-size: 8px; text-transform: uppercase; letter-spacing: 2px; color: var(--t3); margin-bottom: 2px; }
.cmt { display: flex; align-items: center; gap: 8px; padding: 6px 9px; border-radius: 7px; background: var(--s2); border: 1px solid var(--line); margin-bottom: 3px; transition: border-color .15s; }
.cmt:hover { border-color: var(--line2); }
.cmt-h { font-size: 9px; color: var(--blue-l); font-family: monospace; font-weight: 600; flex-shrink: 0; min-width: 48px; }
.cmt-m { font-size: 10px; color: var(--t2); flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cmt-t { font-size: 8px; color: var(--t3); flex-shrink: 0; }

.rc-foot { display: flex; align-items: center; justify-content: space-between; padding-top: 10px; border-top: 1px solid var(--line); }
.push-ind { display: flex; align-items: center; gap: 5px; font-size: 9px; color: var(--t3); }
.pdot { width: 6px; height: 6px; border-radius: 50%; }
.pdot.fr { background: var(--green); box-shadow: 0 0 7px var(--green); }
.pdot.wm { background: var(--amber); }
.pdot.cl { background: var(--t4); }
.gh-link { display: flex; align-items: center; gap: 3px; color: var(--blue-l); text-decoration: none; font-size: 10px; font-weight: 600; transition: color .15s; }
.gh-link:hover { color: var(--blue-xl); }
.gh-link svg { width: 9px; height: 9px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }

/* â”€â”€â”€ Token Modal â”€â”€â”€ */
#tmodal { display: none; position: fixed; inset: 0; z-index: 500; background: rgba(0,0,0,.75); backdrop-filter: blur(10px); align-items: center; justify-content: center; }
#tmodal.open { display: flex; }
.modal-box { background: var(--surface); border: 1px solid var(--line2); border-radius: 20px; padding: 28px; width: 440px; max-width: 90vw; }
.modal-title { font-size: 18px; font-weight: 800; color: #fff; margin-bottom: 5px; }
.modal-sub { font-size: 11px; color: var(--t3); line-height: 1.6; margin-bottom: 18px; }
.modal-inp { width: 100%; padding: 10px 14px; background: var(--bg2); border: 1px solid var(--line2); border-radius: 9px; color: #fff; font-family: 'Inter'; font-size: 12px; outline: none; margin-bottom: 12px; transition: border-color .2s; }
.modal-inp:focus { border-color: var(--blue); }
.modal-btns { display: flex; gap: 8px; }
.modal-btn { flex: 1; padding: 10px; border-radius: 9px; font-family: 'Inter'; font-size: 12px; font-weight: 600; cursor: pointer; border: none; transition: all .2s; }
.modal-btn.primary { background: var(--blue-d); color: #fff; }
.modal-btn.primary:hover { background: var(--blue); }
.modal-btn.secondary { background: var(--line); color: var(--t3); }
.modal-btn.secondary:hover { color: var(--t2); }

/* â”€â”€â”€ Toast â”€â”€â”€ */
#toast { display: none; position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background: var(--red-bg); border: 1px solid rgba(239,68,68,.3); color: var(--red); padding: 10px 22px; border-radius: 10px; font-size: 12px; z-index: 600; max-width: 540px; text-align: center; }

/* â”€â”€â”€ Responsive â”€â”€â”€ */
@media(max-width:1400px) { .kpi-grid { grid-template-columns: repeat(4,1fr); } }
@media(max-width:1100px) { .row-3,.row-4 { grid-template-columns: 1fr 1fr; } .row-2-1,.row-1-2,.row-3-1,.row-1-3 { grid-template-columns: 1fr; } }
@media(max-width:800px)  { .row-2 { grid-template-columns: 1fr; } .kpi-grid { grid-template-columns: repeat(2,1fr); } }
@media(max-width:640px)  { #sidebar { display: none; } #app { margin-left: 0; } #content { padding: 16px; } }
</style>
</head>
<body>

<div class="amb amb1"></div>
<div class="amb amb2"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â• LOADER â•â•â•â•â•â•â•â•â•â•â• -->
<div id="loader">
  <div class="ld-icon-wrap">
    <div class="ld-ring"></div>
    <div class="ld-ring2"></div>
    <div class="ld-gh-bg">
      <svg viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"/>
      </svg>
    </div>
  </div>
  <div class="ld-brand">OIKOS <span>Dev</span></div>
  <div class="ld-org">analistadatos-Oikos Â· GitHub Intelligence Dashboard</div>
  <div class="ld-progress-wrap"><div class="ld-progress" id="ld-bar"></div></div>
  <div class="ld-status" id="ld-status">Inicializando sistema...</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• TOAST â•â•â•â•â•â•â•â•â•â•â• -->
<div id="toast"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â• TOKEN MODAL â•â•â•â•â•â•â•â•â•â•â• -->
<div id="tmodal">
  <div class="modal-box">
    <div class="modal-title">GitHub Token</div>
    <div class="modal-sub">Agrega tu Personal Access Token para repos privados y 5,000 req/h (vs 60 sin token). Se guarda solo en tu browser.</div>
    <input class="modal-inp" type="password" id="token-inp" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx">
    <div class="modal-btns">
      <button class="modal-btn primary" onclick="applyToken()">Aplicar token</button>
      <button class="modal-btn secondary" onclick="closeTk()">Cancelar</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â• -->
<div id="sidebar">
  <div class="sb-logo">OK</div>
  <button class="sb-btn on" title="Dashboard">
    <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
  </button>
  <div class="sb-sep"></div>
  <button class="sb-btn" title="GitHub Token" onclick="openTk()">
    <svg viewBox="0 0 24 24"><circle cx="8" cy="15" r="5"/><path d="M21 3l-9.4 9.4M15.5 4.5l3 3"/></svg>
  </button>
  <button class="sb-btn" title="Refrescar" onclick="refreshAll()">
    <svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
  </button>
  <div class="sb-sep"></div>
  <div class="sb-bottom">
    <button class="sb-btn" title="Ver en GitHub" onclick="window.open('https://github.com/'+ORG,'_blank')">
      <svg viewBox="0 0 24 24"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
    </button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• APP â•â•â•â•â•â•â•â•â•â•â• -->
<div id="app">

  <!-- TOPBAR -->
  <div id="topbar">
    <div class="tb-brand">OIKOS <span>Dev Intelligence</span></div>
    <div class="tb-org">
      <svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
      analistadatos-Oikos
    </div>
    <div class="live-chip"><div class="live-dot"></div>LIVE</div>
    <div class="tb-time" id="tb-time">â€”</div>
    <button class="tb-token-btn" id="rate-info" onclick="openTk()">API: PÃºblico Â· 60/h</button>
    <button id="btn-refresh" onclick="refreshAll()">
      <svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
      Refrescar
    </button>
  </div>

  <!-- CONTENT -->
  <div id="content" style="display:none">

    <!-- â”€â”€ SECCIÃ“N 1: KPIs â”€â”€ -->
    <div class="sec-hd" style="margin-top:0">
      <div class="sec-label">MÃ©tricas Generales</div>
      <div class="sec-chip" id="kpi-updated">â€”</div>
    </div>
    <div class="kpi-grid">
      <div class="kpi-card" style="--kc:var(--blue-l);--kc-bg:var(--blue-bg);animation-delay:.04s">
        <div class="kpi-top">
          <div class="kpi-icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg></div>
          <span class="kpi-badge nt" id="k1-b">â€”</span>
        </div>
        <div class="kpi-val" id="k-repos">0</div>
        <div class="kpi-lbl">Repositorios</div>
        <div class="kpi-sub">pÃºblicos activos</div>
      </div>
      <div class="kpi-card" style="--kc:var(--amber);--kc-bg:var(--amber-bg);animation-delay:.07s">
        <div class="kpi-top">
          <div class="kpi-icon"><svg viewBox="0 0 24 24" style="stroke:var(--amber)"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div>
          <span class="kpi-badge nt">â­</span>
        </div>
        <div class="kpi-val" id="k-stars">0</div>
        <div class="kpi-lbl">Total Stars</div>
      </div>
      <div class="kpi-card" style="--kc:var(--cyan);--kc-bg:var(--cyan-bg);animation-delay:.10s">
        <div class="kpi-top">
          <div class="kpi-icon"><svg viewBox="0 0 24 24" style="stroke:var(--cyan)"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M13 6h3a2 2 0 0 1 2 2v7"/><path d="M6 9v12"/></svg></div>
          <span class="kpi-badge nt">ğŸ´</span>
        </div>
        <div class="kpi-val" id="k-forks">0</div>
        <div class="kpi-lbl">Total Forks</div>
      </div>
      <div class="kpi-card" style="--kc:var(--red);--kc-bg:var(--red-bg);animation-delay:.13s">
        <div class="kpi-top">
          <div class="kpi-icon"><svg viewBox="0 0 24 24" style="stroke:var(--red)"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></div>
          <span class="kpi-badge" id="k-iss-b">â€”</span>
        </div>
        <div class="kpi-val" id="k-issues">0</div>
        <div class="kpi-lbl">Issues Abiertos</div>
      </div>
      <div class="kpi-card" style="--kc:var(--purple);--kc-bg:var(--purple-bg);animation-delay:.16s">
        <div class="kpi-top">
          <div class="kpi-icon"><svg viewBox="0 0 24 24" style="stroke:var(--purple)"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></div>
          <span class="kpi-badge nt">lang</span>
        </div>
        <div class="kpi-val" id="k-langs">0</div>
        <div class="kpi-lbl">Lenguajes</div>
      </div>
      <div class="kpi-card" style="--kc:var(--green);--kc-bg:var(--green-bg);animation-delay:.19s">
        <div class="kpi-top">
          <div class="kpi-icon"><svg viewBox="0 0 24 24" style="stroke:var(--green)"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg></div>
          <span class="kpi-badge up" id="k-c-b">live</span>
        </div>
        <div class="kpi-val" id="k-commits">0</div>
        <div class="kpi-lbl">Commits Recientes</div>
      </div>
      <div class="kpi-card" style="--kc:var(--teal);--kc-bg:var(--teal-bg);animation-delay:.22s">
        <div class="kpi-top">
          <div class="kpi-icon"><svg viewBox="0 0 24 24" style="stroke:var(--teal)"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg></div>
          <span class="kpi-badge nt">MB</span>
        </div>
        <div class="kpi-val" id="k-size">0</div>
        <div class="kpi-lbl">Storage Total</div>
        <div class="kpi-sub">megabytes</div>
      </div>
    </div>

    <!-- â”€â”€ SECCIÃ“N 2: Actividad Principal â”€â”€ -->
    <div class="sec-hd"><div class="sec-label">Actividad de Commits</div><div class="sec-chip">top 12 repos</div></div>
    <div class="panel" style="animation-delay:.26s">
      <div class="panel-hd">
        <div class="panel-title"><svg viewBox="0 0 24 24"><rect x="18" y="3" width="4" height="18"/><rect x="10" y="8" width="4" height="13"/><rect x="2" y="13" width="4" height="8"/></svg>Commits por Repositorio â€” Ãºltimos 5 por repo</div>
        <div class="panel-meta" id="commits-meta">cargando...</div>
      </div>
      <div class="chart-box h260"><canvas id="ch-commits"></canvas></div>
    </div>

    <!-- â”€â”€ SECCIÃ“N 3: Lenguajes + Spotlight â”€â”€ -->
    <div class="sec-hd"><div class="sec-label">Ecosistema & Repo Activo</div></div>
    <div class="row-2-1" style="align-items:start">
      <div class="panel" style="animation-delay:.3s">
        <div class="panel-hd">
          <div class="panel-title"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>DistribuciÃ³n de Lenguajes</div>
          <div class="panel-meta" id="lang-meta">0 tecnologÃ­as</div>
        </div>
        <div class="chart-box h220"><canvas id="ch-langs"></canvas></div>
      </div>
      <div class="spotlight" id="spotlight">
        <div class="sp-eye">â¬¡ Repo mÃ¡s activo</div>
        <div class="sp-name" id="sp-name">â€”</div>
        <div class="sp-desc" id="sp-desc">â€”</div>
        <div class="sp-grid" id="sp-stats"></div>
        <div class="sp-bar" id="sp-bars"></div>
        <div style="font-size:9px;text-transform:uppercase;letter-spacing:2px;color:var(--t3);font-weight:600">Stack org</div>
        <div class="lang-list" id="sp-langs"></div>
      </div>
    </div>

    <!-- â”€â”€ SECCIÃ“N 4: Rankings â”€â”€ -->
    <div class="sec-hd"><div class="sec-label">Rankings</div></div>
    <div class="row-3">
      <div class="panel" style="animation-delay:.34s">
        <div class="panel-hd"><div class="panel-title"><svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>Stars por Repo</div></div>
        <div class="chart-box h200"><canvas id="ch-stars"></canvas></div>
      </div>
      <div class="panel" style="animation-delay:.37s">
        <div class="panel-hd"><div class="panel-title"><svg viewBox="0 0 24 24"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M13 6h3a2 2 0 0 1 2 2v7"/><path d="M6 9v12"/></svg>Forks por Repo</div></div>
        <div class="chart-box h200"><canvas id="ch-forks"></canvas></div>
      </div>
      <div class="panel" style="animation-delay:.40s">
        <div class="panel-hd"><div class="panel-title"><svg viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>TamaÃ±o de Repos (KB)</div></div>
        <div class="chart-box h200"><canvas id="ch-size"></canvas></div>
      </div>
    </div>

    <!-- â”€â”€ SECCIÃ“N 5: Salud â”€â”€ -->
    <div class="sec-hd"><div class="sec-label">Salud del Proyecto</div></div>
    <div class="row-3">
      <div class="panel" style="animation-delay:.43s">
        <div class="panel-hd"><div class="panel-title"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>Issues Abiertos por Repo</div></div>
        <div class="chart-box h200"><canvas id="ch-issues"></canvas></div>
      </div>
      <div class="panel" style="animation-delay:.46s">
        <div class="panel-hd"><div class="panel-title"><svg viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>Almacenamiento por Repo</div></div>
        <div class="storage-wrap" id="storage-wrap" style="margin-top:4px"></div>
      </div>
      <div class="panel" style="animation-delay:.49s">
        <div class="panel-hd"><div class="panel-title"><svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Mapa de Actividad Â· 90 dÃ­as</div></div>
        <div class="heatmap" id="heatmap"></div>
        <div class="hm-legend">
          Menos
          <div class="hm-cell hm-0"></div><div class="hm-cell hm-1"></div>
          <div class="hm-cell hm-2"></div><div class="hm-cell hm-3"></div>
          <div class="hm-cell hm-4"></div>
          MÃ¡s
        </div>
      </div>
    </div>

    <!-- â”€â”€ SECCIÃ“N 6: LÃ­nea de Tiempo â”€â”€ -->
    <div class="sec-hd"><div class="sec-label">LÃ­nea de Tiempo Â· Actividad Reciente</div><div class="sec-chip" id="tl-count">0 eventos</div></div>
    <div class="panel" style="animation-delay:.52s">
      <div class="tl-list" id="tl-list"></div>
    </div>

    <!-- â”€â”€ SECCIÃ“N 7: Tabla â”€â”€ -->
    <div class="sec-hd"><div class="sec-label">Tabla Completa de Repositorios</div><div class="sec-chip" id="tbl-count">0 repos</div></div>
    <div class="panel" style="animation-delay:.54s">
      <div class="tbl-wrap">
        <table class="rtbl">
          <thead>
            <tr>
              <th>#</th><th>Repositorio</th><th>Lenguaje</th>
              <th>Stars</th><th>Forks</th><th>Issues</th>
              <th>TamaÃ±o</th><th>Rama</th><th>Ãšltimo Push</th><th>Link</th>
            </tr>
          </thead>
          <tbody id="tbl-body"></tbody>
        </table>
      </div>
    </div>

    <!-- â”€â”€ SECCIÃ“N 8: Cards â”€â”€ -->
    <div class="sec-hd"><div class="sec-label">Cards Detalladas por Repositorio</div><div class="sec-chip" id="cards-count">0 repos</div></div>
    <div class="cards-grid" id="cards-grid"></div>

  </div><!-- /content -->
</div><!-- /app -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFIG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ORG = 'analistadatos-Oikos';
let ghToken = localStorage.getItem('gh_token') || '';
let CHARTS  = {};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKEN MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openTk()  { document.getElementById('token-inp').value = ghToken; document.getElementById('tmodal').classList.add('open'); }
function closeTk() { document.getElementById('tmodal').classList.remove('open'); }
function applyToken() {
  ghToken = document.getElementById('token-inp').value.trim();
  ghToken ? localStorage.setItem('gh_token', ghToken) : localStorage.removeItem('gh_token');
  document.getElementById('rate-info').textContent = ghToken ? 'API: Token Â· 5000/h' : 'API: PÃºblico Â· 60/h';
  closeTk(); refreshAll();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function makeHeaders() {
  const h = { 'Accept': 'application/vnd.github+json' };
  if (ghToken) h['Authorization'] = `Bearer ${ghToken}`;
  return h;
}
async function apiFetch(url) {
  const r = await fetch(url, { headers: makeHeaders() });
  if (!r.ok) throw new Error(`HTTP ${r.status}`);
  return r.json();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITIES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function esc(s) { return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
function ago(d) {
  if (!d) return 'â€”';
  const s = (Date.now() - new Date(d)) / 1000;
  if (s < 60)      return 'ahora';
  if (s < 3600)    return `${Math.floor(s/60)}m`;
  if (s < 86400)   return `${Math.floor(s/3600)}h`;
  if (s < 604800)  return `${Math.floor(s/86400)}d`;
  if (s < 2592000) return `${Math.floor(s/604800)}sem`;
  return `${Math.floor(s/2592000)}mes`;
}
function pushClass(d) {
  const days = d ? (Date.now() - new Date(d)) / 86400000 : 999;
  return days < 7 ? 'fr' : days < 30 ? 'wm' : 'cl';
}
function fmtKB(kb) { return kb > 1024 ? (kb / 1024).toFixed(1) + 'MB' : kb + 'KB'; }
function setProgress(p) { document.getElementById('ld-bar').style.width = p + '%'; }
function setStatus(t)   { document.getElementById('ld-status').textContent = t; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LANGUAGE PALETTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const LP = {
  JavaScript: { bg:'#2a1f08', bd:'#f59e0b', dot:'#f59e0b', tx:'#fbbf24', ch:'rgba(245,158,11,.75)' },
  Python:     { bg:'#071830', bd:'#3b82f6', dot:'#3b82f6', tx:'#60a5fa', ch:'rgba(59,130,246,.75)'  },
  HTML:       { bg:'#200c04', bd:'#f97316', dot:'#f97316', tx:'#fb923c', ch:'rgba(249,115,22,.75)'  },
  CSS:        { bg:'#0d1030', bd:'#6366f1', dot:'#6366f1', tx:'#818cf8', ch:'rgba(99,102,241,.75)'  },
  TypeScript: { bg:'#040e2a', bd:'#2563eb', dot:'#2563eb', tx:'#93c5fd', ch:'rgba(37,99,235,.75)'   },
  Shell:      { bg:'#031612', bd:'#10b981', dot:'#10b981', tx:'#34d399', ch:'rgba(16,185,129,.75)'  },
  Dockerfile: { bg:'#021628', bd:'#06b6d4', dot:'#06b6d4', tx:'#22d3ee', ch:'rgba(6,182,212,.75)'  },
  Vue:        { bg:'#062018', bd:'#42b883', dot:'#42b883', tx:'#6ee7b7', ch:'rgba(66,184,131,.75)'  },
  default:    { bg:'#111827', bd:'#475569', dot:'#94a3b8', tx:'#94a3b8', ch:'rgba(148,163,184,.75)' },
};
function lp(lang) { return LP[lang] || LP.default; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHART DEFAULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TOOLTIP_STYLE = {
  backgroundColor: '#091220', borderColor: '#1a3052', borderWidth: 1,
  titleColor: '#f1f5f9', bodyColor: '#94a3b8', padding: 10, cornerRadius: 8,
};
const CHART_DEFAULTS = {
  responsive: true,
  maintainAspectRatio: false,
  plugins: { legend: { display: false }, tooltip: TOOLTIP_STYLE },
  scales: {
    x: {
      ticks: { color: '#475569', font: { family: 'Inter', size: 9 }, maxRotation: 38 },
      grid: { color: '#13243d' }, border: { color: '#13243d' },
    },
    y: {
      ticks: { color: '#475569', font: { family: 'Inter', size: 9 } },
      grid: { color: '#13243d' }, border: { color: '#13243d' },
    },
  },
};

function destroyCharts() { Object.values(CHARTS).forEach(c => c.destroy()); CHARTS = {}; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DRAW CHARTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function drawCharts(repos, allCommits) {
  destroyCharts();
  const byPush = [...repos].sort((a,b) => new Date(b.pushed_at) - new Date(a.pushed_at)).slice(0,12);
  const short  = r => r.name.slice(0, 15);

  /* 1. Commits bar */
  const commitData = byPush.map(r => (allCommits[r.name] || []).length);
  document.getElementById('commits-meta').textContent = `${byPush.length} repos Â· ${commitData.reduce((a,v)=>a+v,0)} commits totales`;
  CHARTS.commits = new Chart(document.getElementById('ch-commits'), {
    type: 'bar',
    data: {
      labels: byPush.map(short),
      datasets: [{
        data: commitData,
        backgroundColor: byPush.map(r => lp(r.language).ch),
        borderColor: byPush.map(r => lp(r.language).bd),
        borderWidth: 1, borderRadius: 7, borderSkipped: false,
      }],
    },
    options: { ...CHART_DEFAULTS },
  });

  /* 2. Langs doughnut */
  const langCount = {};
  repos.forEach(r => { if (r.language) langCount[r.language] = (langCount[r.language] || 0) + 1; });
  const langKeys = Object.keys(langCount).sort((a,b) => langCount[b] - langCount[a]);
  document.getElementById('lang-meta').textContent = langKeys.length + ' tecnologÃ­as';
  CHARTS.langs = new Chart(document.getElementById('ch-langs'), {
    type: 'doughnut',
    data: {
      labels: langKeys,
      datasets: [{
        data: langKeys.map(l => langCount[l]),
        backgroundColor: langKeys.map(l => lp(l).ch),
        borderColor: langKeys.map(l => lp(l).bd),
        borderWidth: 2, hoverOffset: 8,
      }],
    },
    options: {
      responsive: true, maintainAspectRatio: false, cutout: '60%',
      plugins: {
        legend: { display: true, position: 'right', labels: { color: '#475569', font: { family: 'Inter', size: 9 }, boxWidth: 8, padding: 10, usePointStyle: true } },
        tooltip: TOOLTIP_STYLE,
      },
    },
  });

  /* 3. Stars */
  const byStars = [...repos].sort((a,b) => b.stargazers_count - a.stargazers_count).slice(0,10);
  CHARTS.stars = new Chart(document.getElementById('ch-stars'), {
    type: 'bar',
    data: { labels: byStars.map(short), datasets: [{ data: byStars.map(r=>r.stargazers_count), backgroundColor:'rgba(245,158,11,.7)', borderColor:'#f59e0b', borderWidth:1, borderRadius:5 }] },
    options: { ...CHART_DEFAULTS },
  });

  /* 4. Forks horizontal */
  const byForks = [...repos].sort((a,b) => b.forks_count - a.forks_count).slice(0,10);
  CHARTS.forks = new Chart(document.getElementById('ch-forks'), {
    type: 'bar',
    data: { labels: byForks.map(short), datasets: [{ data: byForks.map(r=>r.forks_count), backgroundColor:'rgba(6,182,212,.7)', borderColor:'#06b6d4', borderWidth:1, borderRadius:5 }] },
    options: { ...CHART_DEFAULTS, indexAxis: 'y' },
  });

  /* 5. Size line */
  const bySize = [...repos].sort((a,b) => b.size - a.size).slice(0,12);
  CHARTS.size = new Chart(document.getElementById('ch-size'), {
    type: 'line',
    data: { labels: bySize.map(short), datasets: [{ data: bySize.map(r=>r.size), borderColor:'#8b5cf6', backgroundColor:'rgba(139,92,246,.08)', borderWidth:2, pointBackgroundColor:'#8b5cf6', pointRadius:3, fill:true, tension:.4 }] },
    options: { ...CHART_DEFAULTS },
  });

  /* 6. Issues doughnut */
  const withIssues = [...repos].filter(r=>r.open_issues_count>0).sort((a,b)=>b.open_issues_count-a.open_issues_count).slice(0,10);
  CHARTS.issues = new Chart(document.getElementById('ch-issues'), {
    type: withIssues.length > 0 ? 'doughnut' : 'bar',
    data: {
      labels: withIssues.length > 0 ? withIssues.map(short) : ['Sin issues'],
      datasets: [{ data: withIssues.length > 0 ? withIssues.map(r=>r.open_issues_count) : [0], backgroundColor: withIssues.map((_,i)=>`hsla(${220+i*28},72%,58%,.75)`), borderWidth:1, hoverOffset:6 }],
    },
    options: {
      responsive: true, maintainAspectRatio: false, cutout: '55%',
      plugins: {
        legend: { display: true, position:'right', labels:{color:'#475569', font:{family:'Inter',size:9}, boxWidth:8, padding:8, usePointStyle:true} },
        tooltip: TOOLTIP_STYLE,
      },
    },
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STORAGE WIDGET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildStorage(repos) {
  const totalKB  = repos.reduce((a,r) => a+r.size, 0);
  const totalMB  = (totalKB / 1024).toFixed(1);
  const pct      = Math.min(Math.round((totalKB / (1024*500)) * 100), 100);
  const r        = 52, cx = 75, cy = 68, sw = 10;
  const circ     = 2 * Math.PI * r;
  const dash     = circ * (pct / 100);
  const top5     = [...repos].sort((a,b) => b.size - a.size).slice(0, 5);
  const mx       = top5[0]?.size || 1;
  const colors   = ['#3b82f6','#06b6d4','#14b8a6','#8b5cf6','#f59e0b'];

  document.getElementById('storage-wrap').innerHTML = `
    <svg width="150" height="106" viewBox="0 0 150 106" style="overflow:visible">
      <defs>
        <linearGradient id="sg" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#1d4ed8"/>
          <stop offset="100%" stop-color="#06b6d4"/>
        </linearGradient>
      </defs>
      <circle cx="${cx}" cy="${cy}" r="${r}" fill="none" stroke="#13243d" stroke-width="${sw}"/>
      <circle cx="${cx}" cy="${cy}" r="${r}" fill="none" stroke="url(#sg)" stroke-width="${sw}"
        stroke-dasharray="${dash} ${circ}" stroke-linecap="round"
        transform="rotate(-90 ${cx} ${cy})"/>
      <text x="${cx}" y="${cy+7}" font-family="Inter" font-size="17" font-weight="800" fill="#f1f5f9" text-anchor="middle">${totalMB}</text>
      <text x="${cx}" y="${cy+22}" font-family="Inter" font-size="8" fill="#475569" text-anchor="middle" letter-spacing="1">MB TOTAL</text>
    </svg>
    <div class="storage-list">
      ${top5.map((repo, i) => `
        <div class="si">
          <div class="si-dot" style="background:${colors[i]}"></div>
          <div class="si-name" title="${esc(repo.name)}">${esc(repo.name.slice(0,20))}</div>
          <div class="si-bar"><div class="si-fill" style="width:${Math.round((repo.size/mx)*100)}%;background:${colors[i]}"></div></div>
          <div class="si-val">${fmtKB(repo.size)}</div>
        </div>`).join('')}
    </div>`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEATMAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildHeatmap(allCommits) {
  const counts = {};
  Object.values(allCommits).flat().forEach(c => {
    const d = new Date(c.date);
    const key = `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`;
    counts[key] = (counts[key] || 0) + 1;
  });
  const DAYS = 91, now = Date.now(), cells = [];
  for (let i = DAYS - 1; i >= 0; i--) {
    const d = new Date(now - i * 86400000);
    const key = `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`;
    cells.push(counts[key] || 0);
  }
  const max = Math.max(...cells, 1);
  const COLS = 13;
  const ROWS = Math.ceil(DAYS / COLS);
  let html = '';
  for (let r = 0; r < ROWS; r++) {
    html += '<div class="hm-row">';
    for (let c = 0; c < COLS; c++) {
      const idx = r * COLS + c;
      const v   = idx < cells.length ? cells[idx] : 0;
      const lv  = v === 0 ? 0 : v < 2 ? 1 : v < 5 ? 2 : v < 9 ? 3 : 4;
      html += `<div class="hm-cell hm-${lv}" title="${v} commit${v!==1?'s':''} este dÃ­a"></div>`;
    }
    html += '</div>';
  }
  document.getElementById('heatmap').innerHTML = html;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TIMELINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildTimeline(allCommits) {
  const events = [];
  Object.entries(allCommits).forEach(([repo, commits]) => {
    commits.forEach(c => events.push({ repo, ...c }));
  });
  events.sort((a, b) => new Date(b.date) - new Date(a.date));
  const top = events.slice(0, 30);
  document.getElementById('tl-count').textContent = `${top.length} eventos`;
  document.getElementById('tl-list').innerHTML = top.map(e => {
    const pc = pushClass(e.date);
    const s  = lp(e.lang);
    return `
      <div class="tl-item">
        <div class="tl-left">
          <div class="tl-time">${ago(e.date)}</div>
          <div class="tl-vline"></div>
        </div>
        <div style="padding-top:13px;flex-shrink:0"><div class="tl-dot ${pc}"></div></div>
        <div class="tl-body">
          <div class="tl-repo">${esc(e.repo)}</div>
          <div class="tl-msg">${esc(e.message)}</div>
          <div class="tl-tags">
            <span class="tl-tag c">commit</span>
            ${e.lang ? `<span class="tl-tag l" style="background:${s.bg};border-color:${s.bd};color:${s.tx}">${e.lang}</span>` : ''}
          </div>
        </div>
        <div class="tl-hash">${e.sha}</div>
      </div>`;
  }).join('') || '<div style="color:var(--t3);padding:24px;text-align:center;font-size:12px">Sin actividad reciente</div>';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPOTLIGHT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildSpotlight(repos, allCommits) {
  const top = [...repos].sort((a,b) => new Date(b.pushed_at) - new Date(a.pushed_at))[0];
  if (!top) return;
  document.getElementById('sp-name').textContent = top.name;
  document.getElementById('sp-desc').textContent = top.description || 'Sin descripciÃ³n';

  const mxS = Math.max(...repos.map(r => r.stargazers_count), 1);
  const mxF = Math.max(...repos.map(r => r.forks_count), 1);
  const cLen = (allCommits[top.name] || []).length;

  document.getElementById('sp-stats').innerHTML = `
    <div class="sp-stat"><div class="sp-stat-v">${top.stargazers_count}</div><div class="sp-stat-l">Stars</div></div>
    <div class="sp-stat"><div class="sp-stat-v">${top.forks_count}</div><div class="sp-stat-l">Forks</div></div>
    <div class="sp-stat"><div class="sp-stat-v">${top.open_issues_count}</div><div class="sp-stat-l">Issues</div></div>
    <div class="sp-stat"><div class="sp-stat-v">${fmtKB(top.size)}</div><div class="sp-stat-l">TamaÃ±o</div></div>`;

  document.getElementById('sp-bars').innerHTML = `
    <div class="sp-bar-row">
      <div class="sp-bar-lbl"><span>Stars vs mÃ¡ximo</span><span>${top.stargazers_count} / ${mxS}</span></div>
      <div class="bar-track"><div class="bar-fill" style="width:${Math.round((top.stargazers_count/mxS)*100)}%;background:linear-gradient(90deg,#f59e0b,#fbbf24)"></div></div>
    </div>
    <div class="sp-bar-row">
      <div class="sp-bar-lbl"><span>Commits recientes</span><span>${cLen} / 5</span></div>
      <div class="bar-track"><div class="bar-fill" style="width:${Math.min((cLen/5)*100,100)}%;background:linear-gradient(90deg,#3b82f6,#06b6d4)"></div></div>
    </div>`;

  const langCount = {};
  repos.forEach(r => { if (r.language) langCount[r.language] = (langCount[r.language] || 0) + 1; });
  const langKeys = Object.keys(langCount).sort((a,b) => langCount[b] - langCount[a]).slice(0, 5);
  const maxL = langCount[langKeys[0]] || 1;
  const gc   = ['#3b82f6','#06b6d4','#14b8a6','#8b5cf6','#f59e0b'];
  document.getElementById('sp-langs').innerHTML = langKeys.map((l, i) => {
    const s = lp(l);
    return `
      <div class="lang-row">
        <div class="lang-dot" style="background:${s.dot}"></div>
        <div class="lang-name">${l}</div>
        <div class="lang-track"><div class="lang-fill" style="width:${Math.round((langCount[l]/maxL)*100)}%;background:${gc[i]}"></div></div>
        <div class="lang-count">${langCount[l]} repos</div>
      </div>`;
  }).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildTable(repos) {
  const sorted = [...repos].sort((a,b) => new Date(b.pushed_at) - new Date(a.pushed_at));
  document.getElementById('tbl-count').textContent = `${repos.length} repos`;
  document.getElementById('tbl-body').innerHTML = sorted.map((r, i) => {
    const s  = lp(r.language);
    const pc = pushClass(r.pushed_at);
    return `
      <tr>
        <td style="color:var(--t3);font-size:10px">${i+1}</td>
        <td><span class="t-name">${esc(r.name)}</span></td>
        <td>${r.language ? `<span class="t-lang" style="background:${s.bg};border-color:${s.bd};color:${s.tx}">${r.language}</span>` : '<span style="color:var(--t3)">â€”</span>'}</td>
        <td class="t-b">${r.stargazers_count}</td>
        <td class="t-b">${r.forks_count}</td>
        <td class="${r.open_issues_count > 0 ? 't-r' : 't-g'}">${r.open_issues_count}</td>
        <td style="color:var(--t2)">${fmtKB(r.size)}</td>
        <td style="color:var(--t2)">${esc(r.default_branch)}</td>
        <td><span class="t-push ${pc}">${ago(r.pushed_at)}</span></td>
        <td><a href="${r.html_url}" target="_blank" class="t-link">â†—</a></td>
      </tr>`;
  }).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REPO CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildCard(repo, commits, mxS, mxF, idx) {
  const s  = lp(repo.language);
  const pc = pushClass(repo.pushed_at);
  const accentGrad = pc === 'fr'
    ? 'linear-gradient(90deg,var(--green),var(--cyan),transparent)'
    : pc === 'wm'
    ? 'linear-gradient(90deg,var(--amber),transparent)'
    : 'linear-gradient(90deg,var(--line2),transparent)';
  const chip = repo.language
    ? `<span class="rc-chip" style="background:${s.bg};border-color:${s.bd};color:${s.tx}"><span class="rc-chip-dot" style="background:${s.dot}"></span>${repo.language}</span>`
    : '';
  const cmtRows = commits.slice(0,3).map(c =>
    `<div class="cmt"><span class="cmt-h">${c.sha}</span><span class="cmt-m">${esc(c.message)}</span><span class="cmt-t">${ago(c.date)}</span></div>`
  ).join('') || `<div class="cmt"><span class="cmt-m" style="color:var(--t3)">Sin commits recientes</span></div>`;

  return `
    <div class="rc" style="animation-delay:${.03*idx}s">
      <div class="rc-accent" style="background:${accentGrad}"></div>
      <div class="rc-body">
        <div class="rc-header">
          <div class="rc-icon">
            <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          </div>
          <div style="flex:1;min-width:0">
            <div style="display:flex;align-items:center;gap:7px;margin-bottom:3px">
              <div class="rc-name">${esc(repo.name)}</div>${chip}
            </div>
            <div class="rc-desc">${esc(repo.description || 'Sin descripciÃ³n')}</div>
          </div>
        </div>

        <div class="rc-stats">
          <div class="rcs">
            <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            <div class="rcs-v">${repo.stargazers_count}</div><div class="rcs-l">Stars</div>
          </div>
          <div class="rcs">
            <svg viewBox="0 0 24 24"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M13 6h3a2 2 0 0 1 2 2v7"/><path d="M6 9v12"/></svg>
            <div class="rcs-v">${repo.forks_count}</div><div class="rcs-l">Forks</div>
          </div>
          <div class="rcs">
            <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
            <div class="rcs-v">${repo.watchers_count}</div><div class="rcs-l">Watch</div>
          </div>
          <div class="rcs">
            <svg viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
            <div class="rcs-v">${fmtKB(repo.size)}</div><div class="rcs-l">TamaÃ±o</div>
          </div>
        </div>

        <div class="rc-health">
          ${[
            ['Stars',  repo.stargazers_count, mxS, '#f59e0b'],
            ['Forks',  repo.forks_count,      mxF, '#06b6d4'],
            ['Issues', repo.open_issues_count, Math.max(repo.open_issues_count, 1), '#ef4444'],
          ].map(([l,v,m,c]) => `
            <div class="rch">
              <div class="rch-l">${l}</div>
              <div class="rch-track"><div class="rch-fill" style="width:${m>0?Math.round((v/m)*100):0}%;background:${c}"></div></div>
              <div class="rch-v">${v}</div>
            </div>`).join('')}
        </div>

        <div class="rc-commits">
          <div class="rc-clbl">Commits recientes</div>
          ${cmtRows}
        </div>

        <div class="rc-foot">
          <div class="push-ind"><div class="pdot ${pc}"></div>Push ${ago(repo.pushed_at)}</div>
          <a class="gh-link" href="${repo.html_url}" target="_blank" rel="noopener">
            Ver en GitHub
            <svg viewBox="0 0 24 24"><line x1="7" y1="17" x2="17" y2="7"/><polyline points="7 7 17 7 17 17"/></svg>
          </a>
        </div>
      </div>
    </div>`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showToast(msg, dur = 8000) {
  const el = document.getElementById('toast');
  el.textContent = msg; el.style.display = 'block';
  setTimeout(() => el.style.display = 'none', dur);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FETCH COMMITS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function fetchCommits(repoName, lang) {
  try {
    const data = await apiFetch(`https://api.github.com/repos/${ORG}/${repoName}/commits?per_page=5`);
    return data.map(c => ({
      sha:     c.sha.slice(0, 7),
      message: c.commit.message.split('\n')[0].slice(0, 65),
      date:    c.commit.author.date,
      lang,
    }));
  } catch { return []; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN LOAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function loadAll() {
  document.getElementById('content').style.display = 'none';
  document.getElementById('loader').style.display = 'flex';
  document.getElementById('btn-refresh').classList.add('spinning');
  document.getElementById('rate-info').textContent = ghToken ? 'API: Token Â· 5000/h' : 'API: PÃºblico Â· 60/h';
  setProgress(5); setStatus('Conectando con GitHub API...');

  try {
    /* â”€â”€ Fetch repos â”€â”€ */
    setStatus('Cargando repositorios...'); setProgress(15);
    let repos = [];
    for (const base of [
      `https://api.github.com/orgs/${ORG}/repos`,
      `https://api.github.com/users/${ORG}/repos`,
    ]) {
      try {
        let page = 1;
        while (true) {
          const batch = await apiFetch(`${base}?type=public&per_page=100&page=${page}&sort=pushed`);
          repos = repos.concat(batch);
          if (batch.length < 100) break;
          page++;
        }
        if (repos.length) break;
      } catch { repos = []; }
    }
    if (!repos.length) throw new Error('No se encontraron repositorios pÃºblicos. Verifica el nombre de la org.');
    setProgress(35);

    /* â”€â”€ KPIs â”€â”€ */
    const totalStars  = repos.reduce((a,r) => a + r.stargazers_count, 0);
    const totalForks  = repos.reduce((a,r) => a + r.forks_count, 0);
    const totalIssues = repos.reduce((a,r) => a + r.open_issues_count, 0);
    const totalMB     = (repos.reduce((a,r) => a + r.size, 0) / 1024).toFixed(1);
    const langs       = [...new Set(repos.map(r => r.language).filter(Boolean))];
    const byPush      = [...repos].sort((a,b) => new Date(b.pushed_at) - new Date(a.pushed_at));

    document.getElementById('k-repos').textContent  = repos.length;
    document.getElementById('k1-b').textContent     = repos.length + ' repos';
    document.getElementById('k-stars').textContent  = totalStars;
    document.getElementById('k-forks').textContent  = totalForks;
    document.getElementById('k-issues').textContent = totalIssues;
    document.getElementById('k-iss-b').className    = 'kpi-badge ' + (totalIssues > 0 ? 'dn' : 'up');
    document.getElementById('k-iss-b').textContent  = totalIssues > 0 ? `${totalIssues} open` : 'âœ“ clean';
    document.getElementById('k-langs').textContent  = langs.length;
    document.getElementById('k-size').textContent   = totalMB;
    document.getElementById('cards-count').textContent = `${repos.length} repos`;
    document.getElementById('tbl-count').textContent   = `${repos.length} repos`;
    document.getElementById('kpi-updated').textContent = 'Actualizado ' + new Date().toLocaleTimeString('es-CO');
    document.getElementById('tb-time').textContent     = new Date().toLocaleTimeString('es-CO');

    /* â”€â”€ Commits â”€â”€ */
    setStatus('Cargando historial de commits...'); setProgress(40);
    const allCommits = {};
    const CHUNK = 4;
    for (let i = 0; i < repos.length; i += CHUNK) {
      const chunk   = repos.slice(i, i + CHUNK);
      const results = await Promise.all(chunk.map(r => fetchCommits(r.name, r.language)));
      chunk.forEach((r, j) => allCommits[r.name] = results[j]);
      setProgress(40 + Math.round((i / repos.length) * 35));
      setStatus(`Commits: ${Math.min(i + CHUNK, repos.length)} / ${repos.length} repos`);
    }
    const totalCommits = Object.values(allCommits).reduce((a, c) => a + c.length, 0);
    document.getElementById('k-commits').textContent = totalCommits;
    document.getElementById('k-c-b').textContent     = `${totalCommits} total`;

    /* â”€â”€ Render all â”€â”€ */
    setStatus('Renderizando dashboard...'); setProgress(82);
    drawCharts(repos, allCommits);
    buildStorage(repos);
    buildHeatmap(allCommits);
    buildTimeline(allCommits);
    buildSpotlight(repos, allCommits);
    buildTable(repos);

    const mxS  = Math.max(...repos.map(r => r.stargazers_count), 1);
    const mxF  = Math.max(...repos.map(r => r.forks_count), 1);
    const grid = document.getElementById('cards-grid');
    grid.innerHTML = '';
    byPush.forEach((r, i) => grid.insertAdjacentHTML('beforeend', buildCard(r, allCommits[r.name] || [], mxS, mxF, i)));

    setProgress(100);
    setTimeout(() => {
      document.getElementById('loader').style.display = 'none';
      document.getElementById('content').style.display = 'block';
    }, 350);

  } catch (err) {
    document.getElementById('loader').style.display = 'none';
    document.getElementById('content').style.display = 'block';
    showToast(
      err.message.includes('403')
        ? 'âš  Rate limit de GitHub alcanzado (60 req/h sin token). Clic en el Ã­cono ğŸ”‘ del sidebar â†’ agrega tu GitHub Personal Token.'
        : `âš  Error: ${err.message}`
    );
  }
  document.getElementById('btn-refresh').classList.remove('spinning');
}

function refreshAll() { loadAll(); }

loadAll();
</script>
</body>
</html>
